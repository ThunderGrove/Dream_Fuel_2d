extends Node2D

var classList={
	0:"Warrior",
	1:"Knight",
	2:"Blade dancer",
	3:"Archer",
	4:"Dreamer",
	5:"Lavamancer",
	6:"Stormbringer",
	7:"Spellmaster"
}

var team=[
	{
		cname=null,
		cclass=null,
		gender=null,
		hp_max=0,
		hp=0,
		sp_max=0,
		sp=0,
		mp_max=0,
		mp=0,
		strength=0,
		strength_total=0,
		dexterity=0,
		dexterity_total=0,
		endurance=0,
		endurance_total=0,
		agility=0,
		agility_total=0,
		intelligence=0,
		intelligence_total=0,
		spirit=0,
		spirit_total=0, 
		skill_memory=0,
		spell_memory=0,
		speed=10,
		speed_total=10,
		pure_power=0,
		pure_power_total=0,
		pure_defence=0,
		pure_defence_total=0,
		nightmare_power=0,
		nightmare_power_total=0,
		nightmare_defence=0,
		nightmare_defence_total=0,
		fire_power=0,
		fire_power_total=0,
		fire_defence=0,
		fire_defence_total=0,
		water_power=0,
		water_power_total=0,
		water_defence=0,
		water_defence_total=0,
		air_power=0,
		air_power_total=0,
		air_defence=0,
		air_defence_total=0,
		earth_power=0,
		earth_power_total=0,
		earth_defence=0,
		earth_defence_total=0,
		lightning_power=0,
		lightning_power_total=0,
		lightning_defence=0,
		lightning_defence_total=0,
		main=null,
		off=null,
		armor=null,
		skills=null,
		spells=null
	},
	{
		cname=null,
		cclass=null,
		gender=null,
		hp_max=0,
		hp=0,
		sp_max=0,
		sp=0,
		mp_max=0,
		mp=0,
		strength=0,
		strength_total=0,
		dexterity=0,
		dexterity_total=0,
		endurance=0,
		endurance_total=0,
		agility=0,
		agility_total=0,
		intelligence=0,
		intelligence_total=0,
		spirit=0,
		spirit_total=0, 
		skill_memory=0,
		spell_memory=0,
		speed=10,
		speed_total=10,
		pure_power=0,
		pure_power_total=0,
		pure_defence=0,
		pure_defence_total=0,
		nightmare_power=0,
		nightmare_power_total=0,
		nightmare_defence=0,
		nightmare_defence_total=0,
		fire_power=0,
		fire_power_total=0,
		fire_defence=0,
		fire_defence_total=0,
		water_power=0,
		water_power_total=0,
		water_defence=0,
		water_defence_total=0,
		air_power=0,
		air_power_total=0,
		air_defence=0,
		air_defence_total=0,
		earth_power=0,
		earth_power_total=0,
		earth_defence=0,
		earth_defence_total=0,
		lightning_power=0,
		lightning_power_total=0,
		lightning_defence=0,
		lightning_defence_total=0,
		main=null,
		off=null,
		armor=null,
		skills=null,
		spells=null
	},
	{
		cname=null,
		cclass=null,
		gender=null,
		hp_max=0,
		hp=0,
		sp_max=0,
		sp=0,
		mp_max=0,
		mp=0,
		strength=0,
		strength_total=0,
		dexterity=0,
		dexterity_total=0,
		endurance=0,
		endurance_total=0,
		agility=0,
		agility_total=0,
		intelligence=0,
		intelligence_total=0,
		spirit=0,
		spirit_total=0, 
		skill_memory=0,
		spell_memory=0,
		speed=10,
		speed_total=10,
		pure_power=0,
		pure_power_total=0,
		pure_defence=0,
		pure_defence_total=0,
		nightmare_power=0,
		nightmare_power_total=0,
		nightmare_defence=0,
		nightmare_defence_total=0,
		fire_power=0,
		fire_power_total=0,
		fire_defence=0,
		fire_defence_total=0,
		water_power=0,
		water_power_total=0,
		water_defence=0,
		water_defence_total=0,
		air_power=0,
		air_power_total=0,
		air_defence=0,
		air_defence_total=0,
		earth_power=0,
		earth_power_total=0,
		earth_defence=0,
		earth_defence_total=0,
		lightning_power=0,
		lightning_power_total=0,
		lightning_defence=0,
		lightning_defence_total=0,
		main=null,
		off=null,
		armor=null,
		skills=null,
		spells=null
	},
	{
		cname=null,
		cclass=null,
		gender=null,
		hp_max=0,
		hp=0,
		sp_max=0,
		sp=0,
		mp_max=0,
		mp=0,
		strength=0,
		strength_total=0,
		dexterity=0,
		dexterity_total=0,
		endurance=0,
		endurance_total=0,
		agility=0,
		agility_total=0,
		intelligence=0,
		intelligence_total=0,
		spirit=0,
		spirit_total=0, 
		skill_memory=0,
		spell_memory=0,
		speed=10,
		speed_total=10,
		pure_power=0,
		pure_power_total=0,
		pure_defence=0,
		pure_defence_total=0,
		nightmare_power=0,
		nightmare_power_total=0,
		nightmare_defence=0,
		nightmare_defence_total=0,
		fire_power=0,
		fire_power_total=0,
		fire_defence=0,
		fire_defence_total=0,
		water_power=0,
		water_power_total=0,
		water_defence=0,
		water_defence_total=0,
		air_power=0,
		air_power_total=0,
		air_defence=0,
		air_defence_total=0,
		earth_power=0,
		earth_power_total=0,
		earth_defence=0,
		earth_defence_total=0,
		lightning_power=0,
		lightning_power_total=0,
		lightning_defence=0,
		lightning_defence_total=0,
		main=null,
		off=null,
		armor=null,
		skills=null,
		spells=null
	},
	{
		cname=null,
		cclass=null,
		gender=null,
		hp_max=0,
		hp=0,
		sp_max=0,
		sp=0,
		mp_max=0,
		mp=0,
		strength=0,
		strength_total=0,
		dexterity=0,
		dexterity_total=0,
		endurance=0,
		endurance_total=0,
		agility=0,
		agility_total=0,
		intelligence=0,
		intelligence_total=0,
		spirit=0,
		spirit_total=0, 
		skill_memory=0,
		spell_memory=0,
		speed=10,
		speed_total=10,
		pure_power=0,
		pure_power_total=0,
		pure_defence=0,
		pure_defence_total=0,
		nightmare_power=0,
		nightmare_power_total=0,
		nightmare_defence=0,
		nightmare_defence_total=0,
		fire_power=0,
		fire_power_total=0,
		fire_defence=0,
		fire_defence_total=0,
		water_power=0,
		water_power_total=0,
		water_defence=0,
		water_defence_total=0,
		air_power=0,
		air_power_total=0,
		air_defence=0,
		air_defence_total=0,
		earth_power=0,
		earth_power_total=0,
		earth_defence=0,
		earth_defence_total=0,
		lightning_power=0,
		lightning_power_total=0,
		lightning_defence=0,
		lightning_defence_total=0,
		main=null,
		off=null,
		armor=null,
		skills=null,
		spells=null
	}
]

var level=0
var xp=0

func _ready():
	pass # Replace with function body.

# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
#	pass

func calculate_stats(player):
	team[player]["hp_max"]=1000+(level*10)+(team[player]["endurance_total"]*10)
	team[player]["sp_max"]=1000+(level*10)+(team[player]["agility_total"]*10)
	team[player]["mp_max"]=1000+(level*10)+(team[player]["intelligence_total"]*10)
	if team[player]["hp"]>team[player]["hp_max"]:
		team[player]["hp"]=team[player]["hp_max"]
	if team[player]["sp"]>team[player]["sp_max"]:
		team[player]["sp"]=team[player]["sp_max"]
	if team[player]["mp"]>team[player]["mp_max"]:
		team[player]["mp"]=team[player]["mp_max"]

func calcIfNextLevel():
	var nextLevel=level+1
	var xpRequired=0
	var count=0
	while count<nextLevel:
		count+=1
		xpRequired+=count*1000
	if xp>=xpRequired:
		level=nextLevel
		calculate_stats(0)
		calculate_stats(1)
		calculate_stats(2)
		calculate_stats(3)
		calculate_stats(4)